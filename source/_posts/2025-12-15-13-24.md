---
title: C Day 2：处理多种输入类型 —— 字符串与整数
date: 2025-12-15 13:24:00
categories: 
  - [//编程, C语言]
  - [//教程]
tags: [C语言, 入门, scanf, 变量, 输入验证]
---

# C Day 2：处理多种输入类型 —— 字符串与整数

> **在千问的帮助下**
> **项目目标**：编写一个“航班乘客登记器”，同时读取姓名（字符串）和登机口（整数）  
> **核心技能**：使用 `char[]` 和 `int` 变量、正确匹配 `scanf` 格式符  
> **环境**：Windows + VS Code + GCC（建议使用纯英文路径）
>                       于 2025/12/15 13:24

---

## 🧩 完整代码

{% code lang:c %}
#include <stdio.h>

int main() {
    char name[50];
    int gate;

    printf("Passenger name? ");
    scanf("%s", name);

    printf("Boarding gate? ");
    scanf("%d", &gate);  // 注意：%d 对应 int，且需加 &

    printf("\n--- BOARDING PASS ---\n");
    printf("Name: %s\n", name);
    printf("Gate: %d\n", gate);

    return 0;
}
{% endcode %}

---

## 🔍 核心知识点解析

### 1. 两种变量类型：`char[]` vs `int`

|
 类型 
|
 声明方式 
|
 用途 
|
 示例 
|
|
------
|
--------
|
------
|
------
|
|
 字符串 
|
`char name[50];`
|
 存储文本（姓名、城市等） 
|
`"TangShiMei"`
|
|
 整数 
|
`int gate;`
|
 存储数字（编号、年龄、计数） 
|
`15`
, 
`-3`
, 
`100`
|

> 💡 初学者可理解为：  
> - `char name[50]` → 一个能装 50 个字符的“文字盒子”  
> - `int gate` → 一个专门放整数的“数字盒子”

---

### 2. `scanf` 的格式符必须与变量类型严格匹配

|
 变量类型 
|
 正确格式符 
|
 错误示例 
|
 后果 
|
|
---------
|
-----------
|
--------
|
------
|
|
`char[]`
|
`"%s"`
|
`scanf("%d", name);`
|
 读不到内容或乱码 
|
|
`int`
|
`"%d"`
|
`scanf("%s", &gate);`
|
**
读取失败，变量含垃圾值
**
|

✅ 正确用法：
```c
scanf("%s", name);   // 字符串：不加 &
scanf("%d", &gate);  // 整数：必须加 &
⚠️ 为什么 gate 要加 &，而 name 不用？

name 是数组名，本质是指向首元素的地址 → 直接传递
gate 是普通变量，scanf 需要它的内存地址才能写入 → 用 & 取地址
（指针课会深入讲解，现在先记住规则即可）
3. scanf("%d") 的“智能停止”行为
当输入包含非数字字符时（如 12A、23.5），scanf("%d", ...) 会：

从左到右读取连续数字
遇到第一个非数字字符立即停止
将已读数字转换为整数存入变量
剩余字符留在输入缓冲区
示例测试：
用户输入	gate 的值	说明
26	26	正常
12A	12	遇 A 停止
23.5	23	遇 . 停止
-5	-5	负号被识别
abc	未定义（可能为 0 或随机值）	无数字可读
✅ 这是 标准 C 行为，不是 bug！

💡 在真实系统中，这可用于“提取字符串中的数字”。

🛠 编译与运行
bash
编辑
gcc flight_checkin.c -o checkin
./checkin
✅ 成功输出示例：

text
编辑
Passenger name? TangShiMei
Boarding gate? 26

--- BOARDING PASS ---
Name: TangShiMei
Gate: 26
❌ 常见错误排查
现象	原因	解决方案
Gate: 13874（乱码）	scanf 用了 %s 读 int	改为 scanf("%d", &gate);
程序闪退/不等待输入	路径含中文或特殊符号	使用纯英文路径（如 D:\c_practice）
输出挤在一起	printf 缺少 \n	在每行末尾加 \n 换行
💡 学习建议
变量类型与格式符必须一一对应 —— 写完 scanf 后反向检查
测试异常输入（如字母、小数、负数）—— 培养健壮性思维
保持路径纯英文 —— 避免 MSYS2/GCC 的隐藏坑
不要怕“垃圾值” —— 它是理解内存管理的第一步
📅 下一步预告（Day 3）
使用 if 判断登机口是否在有效范围（如 1~30）
实现“输错提示并重新输入”
初步接触输入验证思想
记住：

今天你不仅学会了处理两种数据类型，

更开始思考“用户会怎么乱输”——

这就是从“写代码”迈向“做产品”的关键一步。

继续加油！✈️

text
编辑

---

### ✅ 发布说明

1. 将上述内容保存为 `.md` 文件放入 `source/_posts/`
2. 运行：
   ```bash
   hexo clean && hexo g && hexo s
访问本地预览，确认代码高亮、表格样式正常
部署上线！